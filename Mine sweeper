#include<stdio.h>
#include<time.h>
void khoitao(int a[][5],int b[][5]){			//Tao map khoi dau va sinh min ngau nhien
	srand(time(NULL));
	int i,j,b1,b2,b3,b4,b5,b6;
	b1=rand()%5;
	b2=rand()%5;
	b3=rand()%5;
	b4=rand()%5;
	b5=rand()%5;
	b6=rand()%5;
	for(i=0;i<5;i++){
		for(j=0;j<5;j++){
			a[i][j]=0;
			b[i][j]=0;
		}
	}
	b[b1][b2]=-1;
	b[b3][b4]=-1;
	b[b5][b6]=-1;
}
void countmin(int b[][5]){				//Dem min xung quanh o
	int i,j,count=0;
	for(i=0;i<5;i++){
		for(j=0;j<5;j++){
			count=0;
			if(b[i][j]!=-1){
				if(b[i+1][j]==-1){
					if(i+1>=0 && i+1<=4)
						count++;
				}	
				if(b[i+1][j+1]==-1){
					if(i+1>=0 && i+1<=4 && j+1>=0&& j+1<=4)
						count++;
				}
				if(b[i][j+1]==-1){
					if(j+1>=0 && j+1<=4)
						count++;
				}	
				if(b[i-1][j+1]==-1){
					if(i-1>=0 && i-1<=4 && j+1>=0&& j+1<=4)
						count++;
				}
				if(b[i-1][j]==-1){
					if(i-1>=0 && i-1<=4)
						count++;
				}
				if(b[i-1][j-1]==-1){
					if(i-1>=0 && i-1<=4 && j-1>=0 && j-1<=4)
						count++;
				}
				if(b[i][j-1]==-1){
					if(j-1>=0 && j-1<=4)
						count++;
				}
				if(b[i+1][j-1]==-1){
					if(i+1>=0 && i+1<=4 && j-1>=0 && j-1<=4)
						count++;
				}
				b[i][j]=count;	
			}
		}
	}
}
void printmap1(int b[][5]){			//in map thua
	int i,j,k;
	printf("  ");
	for(k=0;k<5;k++)
		printf("%d ",k%10);
	printf("\n");
	for(i=0;i<5;i++){
		printf("%d ", i%10);
		for(j=0;j<5;j++){
			if(b[i][j]==-1)
				printf("x ");
			else if(b[i][j]==0)
				printf(". ");
			else
				printf("%d ",b[i][j]);
		}
		printf("\n");
	}
}
void printmap2(int a[][5],int b[][5]){		//in map sau moi lan mo o
	int i,j,k;
	printf("  ");
	for(k=0;k<5;k++)
		printf("%d ",k%10);
	printf("\n");
	for(i=0;i<5;i++){
		printf("%d ",i%10);
		for(j=0;j<5;j++){
			if(a[i][j]==0)
				printf("# ");
			else{
				if(b[i][j]==-1)
					printf("x ");
				else if(b[i][j]==0)
					printf(". ");
				else 
					printf("%d ",b[i][j]);
			}
		}
		printf("\n");
	}
}
int _count(int a[][5]){				//dem so o con lai
	int i,j,count=0;
	for(i=0;i<5;i++){
		for(j=0;j<5;j++){
			if(a[i][j]==0)
				count++;
		}
	}
	return count;
}
void _open1(int a[][5],int h, int c){			// mo o theo cach 1
	if(a[h][c]==0)
		a[h][c]=1;
}
int _open2(int a[][5],int b[][5],int h, int c){		// mo o theo cach 2
	a[h][c]=1;	
	if(h<0||h>=5||c<0||c>=5)
		return 0;
	if(b[h][c]==0){
		if(a[h+1][c]==0){
			if(h+1>=0 && h+1<=4 && c>=0&& c<=4){
				a[h+1][c]=1;
			}
		}
		if(a[h+1][c+1]==0){
			if(h+1>=0 && h+1<=4 && c+1>=0 && c+1<=4){
				a[h+1][c+1]=1;
			}
		}
		if(a[h][c+1]==0){
			if(h>=0 && h<= 4 && c+1>=0 && c+1<=4){
				a[h][c+1]=1;
			}
		}
		if(a[h-1][c+1]==0){
			if(h-1>=0 && h-1<=4 && c+1>=0 && c+1<=4){
				a[h-1][c+1]=1;
			}
		}
		if(a[h-1][c]==0){
			if(h-1>=0 && h-1<=4 && c>=0 && c<=4){
				a[h-1][c]=1;
			}
		}
		if(a[h-1][c-1]==0){
			if(h-1>= 0 && h-1<=4 && c-1>=0 && c-1<=4){
				a[h-1][c-1]=1;
			}
		}
		if(a[h][c-1]==0){
			if(h>=0 && h<=4 && c-1>=0 && c-1<=4){
				a[h][c-1]=1;
			}
		}
		if(a[h+1][c-1]==0){
			if(h+1>=0 && h+1<=4 && c-1>=0 && c-1<=4){
				a[h+1][c-1]=1;
			}
		}
	}
}
int _open3(int a[][5],int b[][5],int h,int c){			// mo o theo cach 3
	a[h][c]=1;	
	if(h<0||h>=5||c<0||c>=5)
		return 0;
	if(b[h][c]==0){
		if(a[h+1][c]==0){
			if(h+1>=0 && h+1<=4 && c>=0&& c<=4){
				a[h+1][c]=1;
				_open3(a,b,h+1,c);
			}
		}
		if(a[h+1][c+1]==0){
			if(h+1>=0 && h+1<=4 && c+1>=0 && c+1<=4){
				a[h+1][c+1]=1;
				_open3(a,b,h+1,c+1);
			}
		}
		if(a[h][c+1]==0){
			if(h>=0 && h<= 4 && c+1>=0 && c+1<=4){
				a[h][c+1]=1;
				_open3(a,b,h,c+1);
			}
		}
		if(a[h-1][c+1]==0){
			if(h-1>=0 && h-1<=4 && c+1>=0 && c+1<=4){
				a[h-1][c+1]=1;
				_open3(a,b,h-1,c+1);
			}
		}
		if(a[h-1][c]==0){
			if(h-1>=0 && h-1<=4 && c>=0 && c<=4){
				a[h-1][c]=1;
				_open3(a,b,h-1,c);
			}
		}
		if(a[h-1][c-1]==0){
			if(h-1>= 0 && h-1<=4 && c-1>=0 && c-1<=4){
				a[h-1][c-1]=1;
				_open3(a,b,h-1,c-1);
			}
		}
		if(a[h][c-1]==0){
			if(h>=0 && h<=4 && c-1>=0 && c-1<=4){
				a[h][c-1]=1;
				_open3(a,b,h,c-1);
			}
		}
		if(a[h+1][c-1]==0){
			if(h+1>=0 && h+1<=4 && c-1>=0 && c-1<=4){
				a[h+1][c-1]=1;
				_open3(a,b,h+1,c-1);
			}
		}
	}
}
//int _open3(int a[][5],int b[][5],int h,int c){			// mo o theo cach 3 su dung vong lap
//	int i,j;		
//	a[h][c]=1;
//	if(h<0||h>=5||c<0||c>=5)
//		return 0;
//	if(b[h][c]==0){
//		for (i=-1;i<2;i++) {
//		    for (j=-1;j<2;j++) {
//		    	if (i!=0||j!=0) {
//		    		if (h+i>=0 && h+i<=4 && c+j>=0 && c+j<=4) {
//		    			if(a[h+i][c+j]==0)
//							_open3(a,b,h+i,c+j);
//					}
//				}
//			}
//		}
//	}
//}
int main(){
	int a[5][5], b[5][5],h ,c,bom=3,lc;
	khoitao(a,b);
	countmin(b);
	while(1){					
		printmap2(a,b);
		printf("Nhap o");
		scanf("%d%d",&h,&c);
		if(b[h][c]==-1){
			printmap1(b);
			printf("\nThua");
			break;
		}
		//_open1(a,h,c);
		//_open2(a,b,h,c);
		_open3(a,b,h,c);
		if(_count(a)==bom){
			printmap2(a,b);
			printf("\nThang");
			break;
		}
	}
	return 0;
}
